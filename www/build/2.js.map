{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterPage } from './register';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterPage),\r\n  ],\r\n})\r\nexport class RegisterPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, App, AlertController, LoadingController } from 'ionic-angular';\r\nimport { Api } from '../../providers/api/api';\r\nimport {Storage} from \"@ionic/storage\";\r\nimport {ProfilePage} from \"../profile/profile\";\r\nimport {FirstStep1Page} from \"../firstStep1/firstStep1\";\r\nimport {FirstStep2Page} from \"../firstStep2/firstStep2\";\r\nimport { appSettings } from '../../app/app-settings';\r\n/**\r\n * Generated class for the RegisterPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n @IonicPage()\r\n @Component({\r\n  selector: 'page-register',\r\n  templateUrl: 'register.html',\r\n})\r\n export class RegisterPage {\r\n\r\n  email: any;\r\n  password: any;\r\n  usualName: any;\r\n  birthday: any;\r\n  gender: any;\r\n  city: any;\r\n\r\n  constructor(public navCtrl: NavController, \r\n    public app: App, \r\n    public api: Api, \r\n    public storage: Storage,\r\n    public alertCtrl: AlertController, \r\n    public loadingCtrl: LoadingController) {\r\n    this.storage.get(appSettings.STORAGE_ATTRIBUTES.IS_CONNECTED).then((val) => {\r\n      if (val) {\r\n\r\n        this.storage.get(appSettings.STORAGE_ATTRIBUTES.FIRST_CONNEXION).then((valFirstCon) => {\r\n          if(valFirstCon){\r\n            this.navCtrl.setRoot(FirstStep1Page);              \r\n          }else{\r\n            this.navCtrl.setRoot(ProfilePage);       \r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n\r\n  }\r\n\r\n  goToProfile() {\r\n    let data: any;\r\n    data = {};\r\n    data.email = this.email;\r\n    data.password = this.password;\r\n    data.usualName = this.usualName;\r\n    data.birthday = this.birthday;\r\n    data.gender = this.gender;\r\n    data.city = this.city;\r\n\r\n    let loading = this.loadingCtrl.create({\r\n      spinner: 'crescent',\r\n      content: 'Inscription...',\r\n      dismissOnPageChange: true\r\n    });\r\n\r\n    loading.present();\r\n\r\n    this.api.post('createUser', data)\r\n    .subscribe(\r\n      (data) => {\r\n        let body: any;\r\n        body = JSON.parse(data.text());\r\n\r\n        console.log(body);\r\n        if(body.error){\r\n          loading.dismiss();\r\n          this.doAlert(body.message.text);\r\n        }else{\r\n          this.storage.set('isConnected',true);\r\n          this.storage.set('user', body);\r\n\r\n          // On redirige l'utilisateur vers sa page si il est authentifié\r\n          this.storage.set('firstConnexion', true);\r\n          this.storage.set('tutoriel', true);\r\n          this.navCtrl.setRoot(FirstStep1Page);\r\n        }\r\n      },\r\n      (err) => {\r\n        loading.dismiss();\r\n        this.doAlert(err.message);\r\n      //this.navCtrl.setRoot(this.navCtrl.getActive().component);\r\n    },\r\n    () => {\r\n      //this.goToHome();\r\n    }\r\n    );\r\n  }\r\n\r\n\r\n  goTo(page) {\r\n    this.app.getRootNav().setRoot(page, {}, {animate: true, direction: 'forward'})\r\n    .then(() => {\r\n\r\n    })\r\n  }\r\n\r\n  goBack(page) {\r\n    this.app.getRootNav().setRoot(page, {}, {animate: true, direction: 'back'})\r\n    .then(() => {\r\n\r\n    })\r\n  }\r\n\r\n  doAlert(message) {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Aïe!',\r\n      subTitle: message,\r\n      buttons: ['Ok']\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}